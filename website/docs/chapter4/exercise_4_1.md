---
sidebar_position: 6
---

# Exercise 4.1

3変数の時は、原点中心で $(\pm \frac{{1}}{\sqrt{2}}, \pm \frac{{1}}{\sqrt{2}},\pm \frac{{1}}{\sqrt{2}})$ らを頂点に持つ3次元立方体をとり、その中心から各辺の中点へのベクトルを勾配としてとりました。
4変数についても同様に、原点中心で $(\pm \frac{{1}}{\sqrt{3}}, \pm \frac{{1}}{\sqrt{3}}, \pm \frac{{1}}{\sqrt{3}},\pm \frac{{1}}{\sqrt{3}})$ らを頂点に持つ4次元立方体をとり、その中心から各辺の中点へのベクトルを勾配として定義してみる。

4次元立方体の辺の総数は32個であるので、各辺の中点も下記の通り32個存在する。
$$
(1,1,1,0),(1,-1,1,0),(1,1,-1,0),(1,-1,-1,0),\\
(-1,1,1,0),(-1,-1,1,0),(-1,1,-1,0),(-1,-1,-1,0),\\
(1,1,0,1),(1,-1,0,1),(1,1,0,-1),(1,-1,0,-1),\\
(-1,1,0,1),(-1,-1,0,1),(-1,1,0,-1),(-1,-1,0,-1),\\
(1,0,1,1),(1,0,-1,1),(1,0,1,-1),(1,0,-1,-1),\\
(-1,0,1,1),(-1,0,-1,1),(-1,0,1,-1),(-1,0,-1,-1),\\
(0,1,1,1),(0,1,-1,1),(0,1,1,-1),(0,1,-1,-1),\\
(0,-1,1,1),(0,-1,-1,1),(0,-1,1,-1),(0,-1,-1,-1),
$$
これらと3次元ベクトル $(x,y,z,w)$ との内積の値は
$$
x+y+z, x-y+z, x+y-z, x-y-z, \\
-x+y+z, -x-y+z, -x+y-z, -x-y-z, \\
x+y+w, x-y+w, x+y-w, x-y-w, \\
-x+y+w, -x-y+w, -x+y-w, -x-y-w, \\
x+z+w, x-z+w, x+z-w, x-z-w, \\
-x+z+w, -x-z+w, -x+z-w, -x-z-w, \\
y+z+w, y-z+w, y+z-w, y-z-w, \\
-y+z+w, -y-z+w, -y+z-w, -y-z-w
$$
の32通りとなる。ハッシュ値をこの32通りの計算に対応させて4変数パーリンノイズを実現させる。

import GLSLCanvasBox from "../../static/js/glslcanvas-box";

<GLSLCanvasBox
  baseUrl='/MathOfRealTimeGraphics-samples'  fragUrl='/frags/ch4/exercise_4_1.frag'
/>

```glsl showLineNumbers title="exercise_4_1.frag"
#version 300 es

```
